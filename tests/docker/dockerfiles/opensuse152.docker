FROM opensuse/leap:15.2

RUN zypper update -y

# Please keep this list sorted alphabetically
ENV PACKAGES \
    bc \
    brlapi-devel \
    bzip2 \
    libzip-devel \
    ccache \
    clang \
    cyrus-sasl-devel \
    dbus-1 \
    device-mapper-devel \
    gcc \
    gcc-c++ \
    mkisofs \
    gettext-runtime \
    git \
    glib2-devel \
    glusterfs-devel \
    libgnutls-devel \
    gtk3-devel \
    hostname \
    libaio-devel \
    libasan5 \
    libattr-devel \
    libblockdev-devel \
    libcap-ng-devel \
    libcurl-devel \
    libepoxy-devel \
    libfdt-devel \
    libiscsi-devel \
    libjpeg8-devel \
    libpmem-devel \
    libpng16-devel \
    librbd-devel \
    libseccomp-devel \
    libssh-devel \
    libubsan0 \
    libudev-devel \
    libxml2-devel \
    libzstd-devel \
    llvm \
    lzo-devel \
    make \
    mingw32-filesystem \
    glibc-devel-32bit \
    libSDL2_image-devel \
    mingw64-binutils \
    nmap \
    ncat \
    ncurses-devel \
    libnettle-devel \
    ninja \
    mozilla-nss-devel \
    libnuma-devel \
    perl \
    libpixman-1-0-devel \
    python3-base \
    python3-PyYAML \
    python3-numpy \
    python3-opencv \
    python3-Pillow \
    python3-pip \
    python3-Sphinx \
    python3-virtualenv \
    rdma-core-devel \
    libSDL2-devel \
    snappy-devel \
    sparse \
    libspice-server-devel \
    systemd-devel \
    systemtap-sdt-devel \
    tar \
    tesseract-ocr \
    tesseract-ocr-traineddata-english \
    usbredir-devel \
    virglrenderer-devel \
    libvte-2_91-0 \
    which \
    xen-devel \
    zlib-devel
ENV QEMU_CONFIGURE_OPTS --python=/usr/bin/python3.8

RUN zypper  --non-interactive install -y $PACKAGES
RUN rpm -q $PACKAGES | sort > /packages.txt
