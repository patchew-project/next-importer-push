NVM Express Controller
======================

The nvme device (-device nvme) emulates an NVM Express Controller. It is used
together with nvme-ns devices (-device nvme-ns) which emulates an NVM Express
Namespace.

nvme-ns Options
---------------

  `lbads`; The "LBA Data Size (LBADS)" indicates the LBA data size used by the
     namespace. It is specified in terms of a power of two. Only values between
     9 and 12 (both inclusive) are supported.

  `pstate`; This parameter specifies another blockdev to be used for storing
     persistent state such as logical block allocation tracking. Adding this
     parameter enables various optional features of the device.

       -drive id=pstate,file=pstate.img,format=raw
       -device nvme-ns,pstate=pstate,...

  `iocs`; The "I/O Command Set" associated with the namespace. E.g. 0x0 for the
     NVM Command Set (the default), or 0x2 for the Zoned Namespace Command Set.

  `zns.zcap`; If `iocs` is 0x2, this specifies the zone capacity. It is
     specified in units of logical blocks.

  `zns.zsze`; If `iocs` is 0x2, this specifies the zone size. It is specified
     in units of the logical blocks. If not specified, the value depends on
     zns.zcap; if the zone capacity is a power of two, the zone size will be
     set to that, otherwise it will default to the next power of two.

  `zns.mar`; Specifies the number of active resources available. This is a 0s
     based value.

  `zns.mor`; Specifies the number of open resources available. This is a 0s
     based value.

  `zns.zoc`; Specifies Zone Operation Characteristics (ZOC). Only 0x2 is
     supported, which allows Zone Active Excursions. If enabled, the controller
     will release active resources when needed by transitioning zones to the
     Full state.


Reference Specifications
------------------------

The device currently implements most mandatory features of NVMe v1.3d, see

  https://nvmexpress.org/resources/specifications/

for the specification.


Known issues
------------

* The accounting numbers in the SMART/Health are reset across power cycles

* Interrupt Coalescing is not supported and is disabled by default in volation
  of the specification.
